(function(e){function r(n){e(document).trigger(t,n||{})}var t="simpleTreeMenu.change";var n=10;var i={init:function(){return this.each(function(){var t=e(this);if(t.hasClass("simpleTreeMenu")===false){t.hide();e(this).addClass("simpleTreeMenu");t.children("li").each(function(){i.buildNode(e(this))});if(s.hasLocalStorage()===true){state=localStorage.getItem(s.localStorageKey.apply(this));if(state!=null){state=state.split(",");if(state.length>0){i.deserialize.call(this,state)}}}e(this).show();r()}})},buildNode:function(t){if(t.children("ul").length>0){t.children("ul").hide();r();t.addClass("Node").click(function(n){var i=e(this);if(i.hasClass("expanded")){i.children("ul").slideToggle("fast",function(){i.removeClass("expanded");applyScrollPane();r()});if(typeof localStorage!="undefined"){if(t.parent().attr("id")=="statusTree"){localStorage.removeItem("statusTree")}else if(t.parent().attr("id")=="userTree"){localStorage.removeItem("userTree")}else if(t.parent().attr("id")=="labelTree"){localStorage.removeItem("labelTree")}else if(t.parent().attr("id")=="groupTree"){localStorage.removeItem("groupTree")}else if(t.parent().attr("id")=="filterTree"){localStorage.removeItem("filterTree")}}}else{i.addClass("expanded").children("ul").slideToggle("fast",function(){applyScrollPane();r()});if(typeof localStorage!="undefined"){if(t.parent().attr("id")=="statusTree"){localStorage.setItem("statusTree","1")}else if(t.parent().attr("id")=="userTree"){localStorage.setItem("userTree","1")}else if(t.parent().attr("id")=="labelTree"){localStorage.setItem("labelTree","1")}else if(t.parent().attr("id")=="groupTree"){localStorage.setItem("groupTree","1")}else if(t.parent().attr("id")=="filterTree"){localStorage.setItem("filterTree","1")}}}n.stopPropagation()});if(t.children("ul").children("li").length==0){t.addClass("EmptyNode")}t.children("ul").children("li").each(function(){i.buildNode(e(this))})}else{t.addClass("Leaf").click(function(e){e.stopPropagation()});return}},serialize:function(){state=[];e(".Node, .Leaf",e(this)).each(function(){var t=e(this).hasClass("expanded")?s.EXPANDED:s.COLLAPSED;state.push(t)});if(s.hasLocalStorage()===true){localStorage.setItem(s.localStorageKey.apply(this),state.join())}},deserialize:function(t){e(".Node, .Leaf",e(this)).each(function(n){if(t[n]==s.EXPANDED){e(this).addClass("expanded").children("ul").show();r()}})},expandToNode:function(t){if(t.parent().hasClass("simpleTreeMenu")){if(!t.hasClass("expanded")){t.addClass("expanded").children("ul").show();r()}}t.parents("li","ul.simpleTreeMenu").each(function(){var t=e(this);if(!t.hasClass("expanded")){t.addClass("expanded").children("ul").show();r()}})},expandAll:function(){e(this).find("li.Node").each(function(){$t=e(this);if(!$t.hasClass("expanded")){$t.addClass("expanded").children("ul").show();r()}})},closeAll:function(){e("ul",e(this)).hide();var t=e("li.Node");if(t.hasClass("expanded")){t.removeClass("expanded")}r()}};var s={EXPANDED:"expanded",COLLAPSED:"collapsed",localStorageKeyPrefix:"jQuery-simpleTreeMenu-treeState-",hasLocalStorage:function(){if(localStorage&&localStorage.setItem&&localStorage.getItem){return true}else{return false}},localStorageKey:function(){return s.localStorageKeyPrefix+e(this).attr("id")}};e.fn.simpleTreeMenu=function(t){if(i[t]){return i[t].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof t==="object"||!t){return i.init.apply(this,arguments)}else{e.error("Method "+t+" does not exist on jQuery.simpleTreeMenu")}}})(jQuery)
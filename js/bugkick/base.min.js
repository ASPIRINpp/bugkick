/*!
 * BugKick core
 *
 * Requires jQuery.
 *
 * @author Evgeniy `f0t0n` Naydenov
 */
;(function(e){var t="bugkick";var n=e[t]=e[t]||{};n.namespace=function(e){var r=e.split("."),i=n;if(r.length>0&&r[0]==t){r.shift()}for(var s=0,o;o=r[s++];){i[o]=i[o]||{};i=i[o]}return i};n.viewData=n.namespace("viewData");n.string=n.namespace("string");n.ajax=n.namespace("ajax");n.url=n.namespace("url");n.page=n.namespace("page");n.time=n.namespace("time");n.string.buildString=function(e){return Array.prototype.join.call(arguments,"")};n.ajax.dataCSRF=function(e){var t=e||{};if(typeof YII_CSRF_TOKEN=="undefined"){return t}return $.extend({},t,{YII_CSRF_TOKEN:YII_CSRF_TOKEN})};n.ajax.updateElement=function(e){var t={selector:null,url:null,data:{},callback:function(){},onError:function(){}},n=$.extend({},t,e);$.get(n.url,n.data,function(e){if(e){$(n.selector).html(e)}n.callback.apply(this,arguments)}).error(n.onError)};n.url.REGEX_QUERY_ARRAY_PARAM=/\[\]$/;n.url.AMPERSAND="&";n.url.queryStringToObject=function(e){var t={};e.split(n.url.AMPERSAND).forEach(function(e){var r=e.split("="),i=r.shift(),s=r.shift();if(n.url.REGEX_QUERY_ARRAY_PARAM.test(i)){i=i.replace(n.url.REGEX_QUERY_ARRAY_PARAM,"")}if(t.hasOwnProperty(i)){if(!$.isArray(t[i])){t[i]=[t[i]]}t[i].push(s)}else{t[i]=s}});return t};n.page.appendToHead=function(e){document.getElementsByTagName("head")[0].appendChild(e)};n.page.includeJs=function(e,t,r){var i=document.createElement("script");i.type="text/javascript";if(!!e){i.src=e}if(typeof t==="object"){$.each(t,function(e,t){i[e]=t})}if(typeof r==="string"){i.innerHTML=r}n.page.appendToHead(i)};n.page.includeCss=function(e){var t=document.createElement("link");t.rel="stylesheet";t.href=e;n.page.appendToHead(t)};n.time.toLocal=function(e,t){var n=$(e);$.each(n,function(){$(this).html(moment.unix($(this).attr("utc-timestamp")).format(t))})}})(this);